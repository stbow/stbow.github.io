<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mahisti Clicker</title>
    <style>
      * {
  box-sizing: border-box;
}
body {
  background-color: #120A8f;
  color: white;
  font-family: 'Garamond';
}

header {
  color: #FFD700;
  font-family: 'Brush Script MT';
}

main {
  display: grid;
  grid-template-columns: auto auto auto;
}

button {
  padding: 4px;
  background-color: #FFD700;
  font-family: 'Garamond';
  border-color: #FFEA70;
  border-radius: 2px;
}

.research-button {
  background-color: #FFD700;
  display: block;
  height: 60px;
  width: 275px;
  margin-bottom: 6px;
}

.hidden {
  display: none;
}
    </style>
  </head>
  <body>
    <header>
			<h1>Mahisti Clicker</h1>
		</header>
    <main>
      <div id="col1">
        <p>Money: <span id="balance">0</span> k&#252;rler</p>
        <p id="currency" class="hidden"><span id="altinlar">0</span> altınlar, <span id="yiralar">0</span> yiralar, and <span id="kurler">0</span> kürler</p>
        <button id="sell">Sell for 1 k&#252;r</button>
        <div id="employees-div" class="hidden">
          <p>Employees: <span id="employees-count">0</span></p>
          <p>New employee: <span id="employee-cost">5</span> k&#252;rler</p>
          <button id="hire">Hire an employee</button>
        </div>
        <div id="shops-div" class="hidden">
          <p>Shops: <span id="shops-count">0</span></p>
          <p>New shop: <span id="shop-cost">1000</span> k&#252;rler</p>
          <button id="buy-shop">Open a shop</button>
        </div>
        <div id="fleet-div" class="hidden">
          <p>Fleet: <span id="fleet-count">0</span> ships</p>
          <p>New ship: <span id="fleet-cost">100000</span> k&#252;rler</p>
          <button id="buy-ship">Add new ship to fleet</button>
        </div>
      </div>
      <div id="col2">
        <h3>Research</h3>
        <div id="research-list"></div>
      </div>
      <div id="col3" class="hidden">
        
      </div>
    </main>
    <footer></footer>
    <script>
      const balanceText = document.getElementById("balance");
const col1 = document.getElementById("col1");
const col2 = document.getElementById("col2");
const col3 = document.getElementById("col3");
const currency = document.getElementById("currency");
const altinlar = document.getElementById("altinlar");
const yiralar = document.getElementById("yiralar");
const kurler = document.getElementById("kurler");
const researchList = document.getElementById("research-list");
const employeesDiv = document.getElementById("employees-div");
const employeesCount = document.getElementById("employees-count");
const employeeCost = document.getElementById("employee-cost");
const shopsDiv = document.getElementById("shops-div");
const shopsCount = document.getElementById("shops-count");
const shopCost = document.getElementById("shop-cost");
const fleetDiv = document.getElementById("fleet-div");
const fleetCount = document.getElementById("fleet-count");
const fleetCost = document.getElementById("fleet-cost");
const sell = document.getElementById("sell");
const hire = document.getElementById("hire");
const buyShop = document.getElementById("buy-shop");
const buyShip = document.getElementById("buy-ship");

var balance = 0;
var employees = 0;
var shops = 0;
var ships = 0;
var nextEmployee = 5;
var nextShop = 1000;
var nextShip = 100000;
var empMult = 1;
var shopsMult = 120;
var fleetMult = 15000;

sell.onclick = sellItem;
hire.onclick = hireEmployee;
buyShop.onclick = newShop;
buyShip.onclick = newShip;

function sellItem() {
  balance++;
  balanceText.innerText = balance;
  convertCurrency(balance);
}

function hireEmployee() {
  if (balance >= nextEmployee) {
    employees++;
    balance -= nextEmployee;
    balanceText.innerText = balance;
    employeesCount.innerText = employees;
    nextEmployee = Math.floor(5 * Math.pow(1.2,employees));
    employeeCost.innerText = nextEmployee;
    convertCurrency(balance);
  }
}

function newShop() {
  if (balance >= nextShop) {
    shops++;
    balance -= nextShop;
    balanceText.innerText = balance;
    shopsCount.innerText = shops;
    nextShop = Math.floor(1000 * Math.pow(1.1,shops));
    shopCost.innerText = nextShop;
    convertCurrency(balance);
  }
}

function newShip() {
  if (balance >= nextShip) {
    ships++;
    balance -= nextShip;
    balanceText.innerText = balance;
    fleetCount.innerText = ships;
    nextShip = Math.floor(100000 * Math.pow(1.1,ships));
    fleetCost.innerText = nextShip;
    convertCurrency(balance);
  }
}

window.setInterval(function() {
  balance += empMult * employees;
  balanceText.innerText = Math.floor(balance);
  manageResearch();
  convertCurrency(balance);
}, 1000);

window.setInterval(function() {
  balance += shopsMult * shops;
  balanceText.innerText = Math.floor(balance);
}, 5000);

window.setInterval(function() {
  balance += fleetMult * ships;
  balanceText.innerText = Math.floor(balance);
}, 45000);

function manageResearch() {
  for(let i=0; i < research.length; i++) {
    if (research[i].trigger() && (research[i].uses > 0)) {
      displayResearch(research[i]);
      research[i].uses -= 1;
      activeResearch.push(research[i]);
    }
  }
  //can add another for loop to change the formatting for ones you can afford
}

function displayResearch(project){
  project.element = document.createElement("button");
  project.element.setAttribute("id", project.id);
  
  project.element.onclick = function() {project.effect()};

  project.element.setAttribute("class", "research-button");
  researchList.appendChild(project.element);

  var span = document.createElement("span");
  span.style.fontWeight = "bold";
  project.element.appendChild(span);

  var title = document.createTextNode(project.title);
  span.appendChild(title);

  var cost = document.createTextNode(project.priceTag);
  project.element.appendChild(cost);

  var div = document.createElement("div");
  project.element.appendChild(div);

  var description = document.createTextNode(project.description);
  project.element.appendChild(description);
}

function convertCurrency(num) {
  altinlar.innerText = Math.floor(num / 360);
  yiralar.innerText = Math.floor(num % 360 / 30);
  kurler.innerText = Math.floor(num % 360 % 30);
}

    </script>
    <script>
      var research = [];
var activeResearch = [];

var research1 = {
  id: "researchButton1",
  title: "Hire employees",
  priceTag: "",
  description: "Automate your sales - each employee generates 1 kür per second",
  trigger: function() {return balance >= 3},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research1.flag = 1;
    //displayMessage("You can now hire employees")
    employeesDiv.classList.remove("hidden");
    research1.element.parentNode.removeChild(research1.element);
    let index = activeResearch.indexOf(research1);
    activeResearch.splice(index, 1);
  }
}

research.push(research1);

var research2 = {
  id: "researchButton2",
  title: "Open shops",
  priceTag: "",
  description: "Sell your wares from shops - each shop generates 120 kürler (4 yiralar) every 5 seconds",
  trigger: function() {return balance >= 750},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research2.flag = 1;
    //displayMessage("You can now hire employees")
    shopsDiv.classList.remove("hidden");
    research2.element.parentNode.removeChild(research2.element);
    let index = activeResearch.indexOf(research2);
    activeResearch.splice(index, 1);
  }
}

research.push(research2);

var research3 = {
  id: "researchButton3",
  title: "Employee training ",
  priceTag: "(500 kürler)",
  description: "Employees generate 25% higher revenue",
  trigger: function() {return balance >= 400},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research3.flag = 1;
    //displayMessage("")
    balance -= 500;
    empMult += 0.25;
    research3.element.parentNode.removeChild(research3.element);
    let index = activeResearch.indexOf(research3);
    activeResearch.splice(index, 1);
  }
}

research.push(research3);

var research4 = {
  id: "researchButton4",
  title: "Renovate shops ",
  priceTag: "(30,000 kürler)",
  description: "Shops generate 50% higher revenue",
  trigger: function() {return balance >= 20000},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research4.flag = 1;
    //displayMessage("")
    balance -= 30000;
    shopsMult += 0.5;
    research4.element.parentNode.removeChild(research4.element);
    let index = activeResearch.indexOf(research4);
    activeResearch.splice(index, 1);
  }
}
  
research.push(research4);

var research5 = {
  id: "researchButton5",
  title: "Convert kürler to yiralar and altınlar ",
  priceTag: "",
  description: "Doesn't affect revenue, but easier to read!",
  trigger: function() {return balance >= 500},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research5.flag = 1;
    //displayMessage("")
    currency.classList.remove("hidden");
    research5.element.parentNode.removeChild(research5.element);
    let index = activeResearch.indexOf(research5);
    activeResearch.splice(index, 1);
  }
}
  
research.push(research5);

var research6 = {
  id: "researchButton6",
  title: "Start a fleet",
  priceTag: "",
  description: "Trade your wares across the sea - each ship generates 15,000 kürler every 45 seconds",
  trigger: function() {return balance >= 75000},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research6.flag = 1;
    //displayMessage("You can now hire employees")
    fleetDiv.classList.remove("hidden");
    research6.element.parentNode.removeChild(research6.element);
    let index = activeResearch.indexOf(research6);
    activeResearch.splice(index, 1);
  }
}

research.push(research6);

var research7 = {
  id: "researchButton7",
  title: "New hull materials ",
  priceTag: "(200,000 kürler)",
  description: "Improves speed and durability of ships; increases revenue by 15%",
  trigger: function() {return fleetCount >= 3},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research7.flag = 1;
    //displayMessage("")
    balance -= 20000;
    fleetMult += 0.15;
    research7.element.parentNode.removeChild(research7.element);
    let index = activeResearch.indexOf(research7);
    activeResearch.splice(index, 1);
  }
}

research.push(research7);

var research8 = {
  id: "researchButton8",
  title: "Research fluid dynamics ",
  priceTag: "(300,000 kürler)",
  description: "Ships are faster; increases revenue by 35%",
  trigger: function() {return fleetCount >= 6},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research8.flag = 1;
    //displayMessage("")
    balance -= 300000;
    fleetMult += 0.35;
    research8.element.parentNode.removeChild(research8.element);
    let index = activeResearch.indexOf(research8);
    activeResearch.splice(index, 1);
  }
}
  
research.push(research8);

var research9 = {
  id: "researchButton9",
  title: "Paint hulls ",
  priceTag: "(75,000 kürler per ship)",
  description: "No impact on sailing, but our ships look better than any others on the ocean!",
  trigger: function() {return fleetCount >= 10},
  uses: 1,
  //cost: , function returns TRUE when you can afford it (changes style)
  flag: 0,
  element: null,
  effect: function() {
    research9.flag = 1;
    //displayMessage("")
    balance -= 75000 * fleetCount;
    research9.element.parentNode.removeChild(research9.element);
    let index = activeResearch.indexOf(research9);
    activeResearch.splice(index, 1);
  }
}
  
research.push(research9);
    </script>
  </body>
</html>
